{"remainingRequest":"/Users/panbing/store/lang/doc/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/panbing/store/lang/doc/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/panbing/store/lang/doc/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/panbing/store/lang/doc/blog/node_modules/vuepress-theme-api/components/CURL/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/panbing/store/lang/doc/blog/node_modules/vuepress-theme-api/components/CURL/index.vue","mtime":1620918715376},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/cache-loader/dist/cjs.js","mtime":1620915890299},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/babel-loader/lib/index.js","mtime":1620915889925},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/cache-loader/dist/cjs.js","mtime":1620915890299},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/vue-loader/lib/index.js","mtime":1620915890611}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBucHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vaGVscGVycy9yZXF1ZXN0JzsKaW1wb3J0IGN1cmwgZnJvbSAnLi4vLi4vaGVscGVycy9jdXJsJzsKaW1wb3J0IHsgaXNKU09OLCBpc1F1ZXJ5U3RyaW5nIH0gZnJvbSAnLi4vLi4vaGVscGVycy9pcyc7IC8vIGNvbmZpZ3VyZSBwcm9ncmVzcyBiYXIKCm5wcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDVVJMJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlnaHRCdG46IHRydWUsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBuZXR3b3JrUGFuZWxWaXNpYmxlOiBmYWxzZSwKICAgICAgbmV0d29ya0RhdGE6IHsKICAgICAgICBtZXRob2Q6ICcnLAogICAgICAgIHVybDogJycsCiAgICAgICAgaGVhZGVyczoge30sCiAgICAgICAgcmVxdWVzdDoge30sCiAgICAgICAgcmVzcG9uc2U6IHt9LAogICAgICAgIHN0YXV0c0NvZGU6ICcnLAogICAgICAgIHN0YXR1c1RleHQ6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMubm90SW5FeGFtcGxlQm94KCkpIHsKICAgICAgdGhpcy5saWdodEJ0biA9IGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb3Blbk5ldHdvcmtQYW5lbDogZnVuY3Rpb24gb3Blbk5ldHdvcmtQYW5lbCgpIHsKICAgICAgdGhpcy5uZXR3b3JrUGFuZWxWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBzZW5kUmVxdWVzdDogZnVuY3Rpb24gc2VuZFJlcXVlc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY21kID0gdGhpcy4kcmVmcy5jdXJsLm91dGVyVGV4dC50cmltKCk7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHJldHVybjsKICAgICAgdmFyIG9wdGlvbnMgPSBjdXJsKGNtZCk7CgogICAgICBpZiAoIW9wdGlvbnMpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdHb3QgYW4gaW52YWxpZCBDVVJMIGNvbW1hbmQsIHBsZWFzZSBjaGVjayBpdCBhbmQgdHJ5IGFnYWluLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5jbGVhcigpOwogICAgICBjb25zb2xlLmxvZygnPT09PT09IERFQlVHIElORk8gQkVHSU4gPT09PT09Jyk7CiAgICAgIGNvbnNvbGUuaW5mbygiPT4gIi5jb25jYXQob3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSwgIiAiKS5jb25jYXQob3B0aW9ucy51cmwpKTsKICAgICAgdGhpcy5uZXR3b3JrRGF0YS5tZXRob2QgPSBvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpOwogICAgICB0aGlzLm5ldHdvcmtEYXRhLnVybCA9IG9wdGlvbnMudXJsOwoKICAgICAgaWYgKG9wdGlvbnMuaGVhZGVycykgewogICAgICAgIGNvbnNvbGUuaW5mbygnPT4gSGVhZGVyczonLCBvcHRpb25zLmhlYWRlcnMpOwogICAgICAgIHRoaXMubmV0d29ya0RhdGEuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVyczsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMucGFyYW1zKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCc9PiBQYXJhbXM6Jywgb3B0aW9ucy5wYXJhbXMpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5kYXRhKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCc9PiBEYXRhOicsIG9wdGlvbnMuZGF0YSk7CiAgICAgICAgdGhpcy5uZXR3b3JrRGF0YS5kYXRhID0gb3B0aW9ucy5kYXRhOwogICAgICB9CgogICAgICB0aGlzLm9wZW5Mb2FkaW5nKCk7CiAgICAgIHJlcXVlc3Qob3B0aW9ucykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLmNsb3NlTG9hZGluZygpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCIiLmNvbmNhdChkYXRhLnN0YXR1cywgIiAiKS5jb25jYXQoZGF0YS5kYXRhLm1lc3NhZ2UgfHwgZGF0YS5zdGF0dXNUZXh0KSk7CgogICAgICAgIF90aGlzLm5ldHdvcmtEYXRhLnN0YXR1c0NvZGUgPSAiIi5jb25jYXQoZGF0YS5zdGF0dXMpOwogICAgICAgIF90aGlzLm5ldHdvcmtEYXRhLnN0YXR1c1RleHQgPSBkYXRhLnN0YXR1c1RleHQ7CiAgICAgICAgX3RoaXMubmV0d29ya0RhdGEucmVzcG9uc2UgPSBkYXRhLmRhdGE7CiAgICAgICAgY29uc29sZS5pbmZvKCc8PScsIGRhdGEuc3RhdHVzLCBkYXRhLnN0YXR1c1RleHQpOwogICAgICAgIGNvbnNvbGUuaW5mbygnPD0nLCAnZGF0YTonLCBkYXRhLmRhdGEpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuY2xvc2VMb2FkaW5nKCk7CgogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCIiLmNvbmNhdChlcnIuc3RhdHVzLCAiICIpLmNvbmNhdChlcnIubWVzc2FnZSkpOwoKICAgICAgICBfdGhpcy5uZXR3b3JrRGF0YS5zdGF0dXNDb2RlID0gIiIuY29uY2F0KGVyci5zdGF0dXMpOwogICAgICAgIF90aGlzLm5ldHdvcmtEYXRhLnN0YXR1c1RleHQgPSBlcnIubWVzc2FnZTsKICAgICAgICBfdGhpcy5uZXR3b3JrRGF0YS5yZXNwb25zZSA9IGVyci5kYXRhOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJzw9JywgZXJyKTsKICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coJz09PT09PSBERUJVRyBJTkZPIEVORCA9PT09PT0nKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLm9wZW5OZXR3b3JrUGFuZWwoKTsKICAgICAgICB9LCAzMDApOwogICAgICB9KTsKICAgIH0sCiAgICBub3RJbkV4YW1wbGVCb3g6IGZ1bmN0aW9uIG5vdEluRXhhbXBsZUJveCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGVsLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCd0eXBlJykgIT09ICdleGFtcGxlJzsKICAgIH0sCiAgICBvcGVuTG9hZGluZzogZnVuY3Rpb24gb3BlbkxvYWRpbmcoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIG5wcm9ncmVzcy5zdGFydCgpOwogICAgfSwKICAgIGNsb3NlTG9hZGluZzogZnVuY3Rpb24gY2xvc2VMb2FkaW5nKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgbnByb2dyZXNzLmRvbmUoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"curl__container\">\n    <div ref=\"curl\" class=\"curl__body\" contenteditable>\n      <slot></slot>\n    </div>\n    <Button :light=\"lightBtn\" :loading=\"loading\" @click=\"sendRequest\"\n      >Send request now</Button\n    >\n    <NetworkPanel :visible.sync=\"networkPanelVisible\" v-bind=\"networkData\" />\n  </div>\n</template>\n\n<script>\nimport nprogress from 'nprogress'\n\nimport request from '../../helpers/request'\nimport curl from '../../helpers/curl'\nimport { isJSON, isQueryString } from '../../helpers/is'\n\n// configure progress bar\nnprogress.configure({\n  showSpinner: false,\n})\n\nexport default {\n  name: 'CURL',\n  data() {\n    return {\n      lightBtn: true,\n      loading: false,\n      networkPanelVisible: false,\n      networkData: {\n        method: '',\n        url: '',\n        headers: {},\n        request: {},\n        response: {},\n        stautsCode: '',\n        statusText: '',\n      },\n    }\n  },\n  mounted() {\n    if (this.notInExampleBox()) {\n      this.lightBtn = false\n    }\n  },\n  methods: {\n    openNetworkPanel() {\n      this.networkPanelVisible = true\n    },\n    sendRequest() {\n      const cmd = this.$refs.curl.outerText.trim()\n\n      if (this.loading) return\n\n      const options = curl(cmd)\n\n      if (!options) {\n        this.$message.error(\n          'Got an invalid CURL command, please check it and try again.'\n        )\n        return\n      }\n\n      console.clear()\n      console.log('====== DEBUG INFO BEGIN ======')\n      console.info(`=> ${options.method.toUpperCase()} ${options.url}`)\n\n      this.networkData.method = options.method.toUpperCase()\n      this.networkData.url = options.url\n\n      if (options.headers) {\n        console.info('=> Headers:', options.headers)\n\n        this.networkData.headers = options.headers\n      }\n\n      if (options.params) {\n        console.info('=> Params:', options.params)\n      }\n\n      if (options.data) {\n        console.info('=> Data:', options.data)\n\n        this.networkData.data = options.data\n      }\n\n      this.openLoading()\n\n      request(options)\n        .then((data) => {\n          this.closeLoading()\n\n          this.$message.success(\n            `${data.status} ${data.data.message || data.statusText}`\n          )\n\n          this.networkData.statusCode = `${data.status}`\n          this.networkData.statusText = data.statusText\n          this.networkData.response = data.data\n\n          console.info('<=', data.status, data.statusText)\n          console.info('<=', 'data:', data.data)\n        })\n        .catch((err) => {\n          this.closeLoading()\n\n          this.$message.error(`${err.status} ${err.message}`)\n\n          this.networkData.statusCode = `${err.status}`\n          this.networkData.statusText = err.message\n          this.networkData.response = err.data\n\n          console.error('<=', err)\n        })\n        .finally(() => {\n          console.log('====== DEBUG INFO END ======')\n\n          setTimeout(() => {\n            this.openNetworkPanel()\n          }, 300)\n        })\n    },\n    notInExampleBox() {\n      return this.$el.parentNode.getAttribute('type') !== 'example'\n    },\n    openLoading() {\n      this.loading = true\n\n      nprogress.start()\n    },\n    closeLoading() {\n      this.loading = false\n\n      nprogress.done()\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n.curl\n  &__body\n    outline: none\n</style>\n"],"sourceRoot":"node_modules/vuepress-theme-api/components/CURL"}]}