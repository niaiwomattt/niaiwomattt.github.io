{"remainingRequest":"/Users/panbing/store/lang/doc/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/panbing/store/lang/doc/blog/node_modules/vuepress-theme-api/helpers/tree.js","dependencies":[{"path":"/Users/panbing/store/lang/doc/blog/node_modules/vuepress-theme-api/helpers/tree.js","mtime":1620918715376},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/cache-loader/dist/cjs.js","mtime":1620915890299},{"path":"/Users/panbing/store/lang/doc/blog/node_modules/babel-loader/lib/index.js","mtime":1620915889925}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7CmltcG9ydCB7IGlzSG9tZVBhZ2UsIG1hdGNoRmlsZU5hbWUsIG1hdGNoR3JvdXBOYW1lRnJvbVBhdGgsIG1hdGNoTG9jYWxlUGF0aEZyb21QYXRoIH0gZnJvbSAnLi9wYXRoJzsKCnZhciBnZXRUb3BMZXZlbE9mSGVhZGVycyA9IGZ1bmN0aW9uIGdldFRvcExldmVsT2ZIZWFkZXJzKGhlYWRlcnMpIHsKICBpZiAoIWhlYWRlcnMubGVuZ3RoKSByZXR1cm4gLTE7CiAgdmFyIHJlc3VsdCA9IGhlYWRlcnNbMF0ubGV2ZWw7CgogIGZvciAodmFyIGkgPSAxLCBsZW4gPSBoZWFkZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZiAoaGVhZGVyc1tpXS5sZXZlbCA8IHJlc3VsdCkgewogICAgICByZXN1bHQgPSBoZWFkZXJzW2ldLmxldmVsOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfTsKCmV4cG9ydCBmdW5jdGlvbiBnZXREaXJUcmVlKCRzaXRlLCAkbG9jYWxlUGF0aCkgewogIHZhciBzaWRlYmFycyA9IHt9OwogIHZhciBzaWRlYmFyQ29uZmlnID0gY29uZmlnLmdldCgkc2l0ZSwgJ3NpZGViYXInLCAkbG9jYWxlUGF0aCk7CgogIGlmIChzaWRlYmFyQ29uZmlnKSB7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihzaWRlYmFycywgc2lkZWJhckNvbmZpZyk7CiAgfQoKICAkc2l0ZS5wYWdlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIC8vIE9ubHkgc2hvdyBjdXJyZW50IGxvY2FsZXMgaW4gc2lkZWJhcgogICAgcmV0dXJuICRzaXRlLmxvY2FsZXMgPyBtYXRjaExvY2FsZVBhdGhGcm9tUGF0aChpdGVtLnBhdGgsICRzaXRlLmxvY2FsZXMpID09PSAkbG9jYWxlUGF0aCA6IHRydWU7CiAgfSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGlzSG9tZVBhZ2UoaXRlbS5wYXRoLCAkbG9jYWxlUGF0aCkpIHsKICAgICAgc2lkZWJhcnNbJ2hvbWUnXSA9IHsKICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICB0bzogaXRlbS5wYXRoLAogICAgICAgIGNoaWxkcmVuOiBbXQogICAgICB9OwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGdyb3VwTmFtZSA9IG1hdGNoR3JvdXBOYW1lRnJvbVBhdGgoaXRlbS5wYXRoLCAkbG9jYWxlUGF0aCk7CgogICAgaWYgKCFzaWRlYmFyc1tncm91cE5hbWVdKSB7CiAgICAgIHNpZGViYXJzW2dyb3VwTmFtZV0gPSB7CiAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgIH07CiAgICB9CgogICAgaWYgKGl0ZW0uaGVhZGVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGl0ZW0uaGVhZGVycyA9IFtdOwogICAgfQoKICAgIHZhciBtYXhMZXZlbCA9IGdldFRvcExldmVsT2ZIZWFkZXJzKGl0ZW0uaGVhZGVycyk7IC8vIGluZGV4IHBhZ2UgaW4gdGhpcyBncm91cAoKICAgIGlmIChpdGVtLnBhdGggPT09ICIiLmNvbmNhdCgkbG9jYWxlUGF0aCkuY29uY2F0KGdyb3VwTmFtZSwgIi8iKSkgewogICAgICBzaWRlYmFyc1tncm91cE5hbWVdLnRpdGxlID0gaXRlbS50aXRsZTsKICAgICAgc2lkZWJhcnNbZ3JvdXBOYW1lXS50byA9IGl0ZW0ucGF0aDsKICAgICAgc2lkZWJhcnNbZ3JvdXBOYW1lXS5oZWFkZXJzID0gaXRlbS5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmxldmVsID09PSBtYXhMZXZlbDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBzaWRlYmFyc1tncm91cE5hbWVdLmNoaWxkcmVuLnB1c2goewogICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlIHx8IG1hdGNoRmlsZU5hbWUoaXRlbS5wYXRoKSwKICAgICAgICB0bzogaXRlbS5wYXRoLAogICAgICAgIGhlYWRlcnM6IGl0ZW0uaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmxldmVsID09PSBtYXhMZXZlbDsKICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9KTsKICByZXR1cm4gc2lkZWJhcnM7Cn0="},{"version":3,"sources":["/Users/panbing/store/lang/doc/blog/node_modules/vuepress-theme-api/helpers/tree.js"],"names":["config","isHomePage","matchFileName","matchGroupNameFromPath","matchLocalePathFromPath","getTopLevelOfHeaders","headers","length","result","level","i","len","getDirTree","$site","$localePath","sidebars","sidebarConfig","get","Object","assign","pages","filter","item","locales","path","forEach","title","to","children","groupName","undefined","maxLevel","push"],"mappings":"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","sourcesContent":["import config from './config'\nimport {\n  isHomePage,\n  matchFileName,\n  matchGroupNameFromPath,\n  matchLocalePathFromPath,\n} from './path'\n\nconst getTopLevelOfHeaders = (headers) => {\n  if (!headers.length) return -1\n\n  let result = headers[0].level\n\n  for (let i = 1, len = headers.length; i < len; i++) {\n    if (headers[i].level < result) {\n      result = headers[i].level\n    }\n  }\n\n  return result\n}\n\nexport function getDirTree($site, $localePath) {\n  const sidebars = {}\n\n  const sidebarConfig = config.get($site, 'sidebar', $localePath)\n\n  if (sidebarConfig) {\n    return Object.assign(sidebars, sidebarConfig)\n  }\n\n  $site.pages\n    .filter((item) => {\n      // Only show current locales in sidebar\n      return $site.locales\n        ? matchLocalePathFromPath(item.path, $site.locales) === $localePath\n        : true\n    })\n    .forEach((item) => {\n      if (isHomePage(item.path, $localePath)) {\n        sidebars['home'] = {\n          title: item.title,\n          to: item.path,\n          children: [],\n        }\n\n        return\n      }\n\n      const groupName = matchGroupNameFromPath(item.path, $localePath)\n\n      if (!sidebars[groupName]) {\n        sidebars[groupName] = {\n          children: [],\n        }\n      }\n\n      if (item.headers === undefined) {\n        item.headers = []\n      }\n\n      const maxLevel = getTopLevelOfHeaders(item.headers)\n\n      // index page in this group\n      if (item.path === `${$localePath}${groupName}/`) {\n        sidebars[groupName].title = item.title\n        sidebars[groupName].to = item.path\n        sidebars[groupName].headers = item.headers.filter(\n          (item) => item.level === maxLevel\n        )\n      } else {\n        sidebars[groupName].children.push({\n          title: item.title || matchFileName(item.path),\n          to: item.path,\n          headers: item.headers.filter((item) => item.level === maxLevel),\n        })\n      }\n    })\n\n  return sidebars\n}\n"]}]}